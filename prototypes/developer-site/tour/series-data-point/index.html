<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>ONS developer site - Introduction</title>
    <link rel="preload" as="font" type="font/woff2"
        href="https://cdn.ons.gov.uk/assets/fonts/open-sans-regular/OpenSans-Regular-webfont.woff2" crossorigin>
    <link rel="preload" as="font" type="font/woff2"
        href="https://cdn.ons.gov.uk/assets/fonts/open-sans-bold/OpenSans-Bold-webfont.woff2" crossorigin>
    <link rel="stylesheet" href="https://cdn.ons.gov.uk/sixteens/eb938ca/css/main.css">
    <link rel="stylesheet"
        href="https://jmblog.github.io/color-themes-for-google-code-prettify/themes/tomorrow-night.min.css">
    <link rel="stylesheet" href="/assets/css/main.css">

    <script>
        (function (w, d, s, l, i) {
            w[l] = w[l] || [];
            w[l].push({
                'gtm.start': new Date().getTime(),
                event: 'gtm.js'
            });
            var f = d.getElementsByTagName(s)[0],
                j = d.createElement(s),
                dl = l != 'dataLayer' ? '&l=' + l : '';
            j.async = true;
            j.src =
                'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
            f.parentNode.insertBefore(j, f);
        })(window, document, 'script', 'dataLayer', 'GTM-MBCBVQS');
    </script>

</head>

<body class="adjust-font-size--16 link-adjust sticky-footer">
    <header class="padding-bottom-md--1 padding-bottom-sm--3 border-bottom--iron-sm border-bottom--iron-md">

        <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MBCBVQS" height="0" width="0"
                style="display:none;visibility:hidden"></iframe></noscript>

        <a class="skiplink" href="#main" tabindex="0">Skip to main content</a>
        <div class="wrapper">
            <div class="header col-wrap">
                <div class="col col--lg-one-third col--md-half">
                    <a class="inline-block" href="">
                        <img class="logo" src="https://cdn.ons.gov.uk/assets/images/ons-logo.svg"
                            alt="Office for National Statistics">
                    </a>
                </div>
                <div class="col col--lg-two-thirds col--md-half header-title">
                    <strong>Developer site</strong>
                </div>
            </div>
        </div>
    </header>
    <div class="banner">
        <div class="wrapper">
            <div class="col col--md-40 col--lg-44">
                <span class="banner__text-icon">Beta</span>
                <div class="banner__body">
                    <p>This is a new way of getting data - your <a href="/feedback?service=dev">feedback</a> will help
                        us to improve it.</p>
                </div>
            </div>
        </div>
    </div>
    <main id="main" role="main" tabindex="-1">
        <div class="wrapper margin-bottom-sm--3 margin-bottom-md--6">
            <div class="col-wrap">
                <div class="col col--md-one-half col--lg-one-third sticky sticky--lg-only">
                    <div class="margin-top-sm--4 margin-top-md--5 margin-right-lg--2 padding-top--1 padding-right--1 padding-bottom--1 padding-left--1 background--iron-light">
                        <h2 class="font-size--18 margin-top--2"><strong>Contents:</strong></h2>
                        <nav>
                            <ul class="list--neutral">
                            
                                <li>
                                    <a href="">
                                        
                                            <strong>Introduction</strong>
                                        
                                    </a>
                                </li>
                            
                                <li>
                                    <a href="observations/">
                                        
                                            Guide to requesting specific observation
                                        
                                    </a>
                                </li>
                            
                                <li>
                                    <a href="filters/">
                                        
                                            Guide to filtering a dataset
                                        
                                    </a>
                                </li>
                            
                                <li>
                                    <a href="tour/intro/">
                                        
                                            API tour
                                        
                                    </a>
                                </li>
                            
                                <li>
                                    <a href="dataset/">
                                        
                                            Explore our data
                                        
                                    </a>
                                </li>
                            
                                <li>
                                    <a href="filter/">
                                        
                                            Filter a dataset
                                        
                                    </a>
                                </li>
                            
                                <li>
                                    <a href="code-list/">
                                        
                                            Explore codes and lists
                                        
                                    </a>
                                </li>
                            
                                <li>
                                    <a href="hierarchy/">
                                        
                                            Explore hierarchies
                                        
                                    </a>
                                </li>
                            
                                <li>
                                    <a href="search/">
                                        
                                            Search within a dataset
                                        
                                    </a>
                                </li>
                            
                            </ul>
                        </nav>
                    </div>
                </div>
                <div class="col col--md-one-half col--lg-two-thirds">
                    <h1 class="break-word margin-top-sm--3 margin-bottom-sm--3"><strong> Get a series of data points</strong></h1>
                    <div class="static section__content--static-markdown">
    
<p>You can also get a series of data points using the <a href="../../dataset/datasets-{id}-editions-{edition}-versions-{version}-observations/">get observation</a> endpoint.</p>

<p>By making one of the dimensions values a wildcard, multiple data points are returned.</p>

<p>You can use this to fetch a time series or data for multiple geographic areas.</p>

<script>
    function orderByDate(a, b) {
        if (a[2] < b[2]) return -1;
        if (a[2] > b[2]) return 1;
        return 0;
    }

    window.onload = () => {
        document.getElementById("tab-results").addEventListener('click', function(){
            document.getElementById("tryitout-get-observation-result-result").classList.remove("hidden");
            document.getElementById("tryitout-get-observation-json-result").classList.add("hidden");
            document.getElementById("tryitout-get-observation-json-result").classList.remove("btn--secondary-active");
            document.getElementById("tab-results").classList.add("btn--secondary-active");
            document.getElementById("tab-json").classList.remove("btn--secondary-active");
        });
        document.getElementById("tab-json").addEventListener('click', function(){
            document.getElementById("tryitout-get-observation-result-result").classList.add("hidden");
            document.getElementById("tryitout-get-observation-json-result").classList.remove("hidden");
            document.getElementById("tab-results").classList.remove("btn--secondary-active");
            document.getElementById("tab-json").classList.add("btn--secondary-active");
        });

        document.getElementById("tryitout-get-observation").addEventListener('click', function(){
            fetch("https://api.beta.ons.gov.uk/v1/datasets/cpih01")
                .then((r) => {
                    return r.json();
                })
                .then((r) => {
                    document.getElementById("title").innerText = r.title;
                })
                .catch((e) => {
                    console.log(e);
                });

            fetch("https://api.beta.ons.gov.uk/v1/datasets/cpih01/editions/time-series/versions/6/observations?time=*&geography=K02000001&aggregate=cpih1dim1A0")
                .then((r) => {
                    return r.json();
                })
                .then((r) => {
                    document.getElementById("tryitout-get-observation-results").removeAttribute("class");
                    document.getElementById("tryitout-get-observation").removeAttribute("disabled");
                    document.getElementById("tryitout-get-observation").setAttribute("class", "btn btn--primary");

                    document.getElementById("tryitout-get-observation-json").innerText = JSON.stringify(r, null, 2);

                    //create an array to story data
                    let timeseries = [];

                    //build a map of the dimensions
                    r.observations.map(function (data) {
                        //create a new field from the date to allow it to  be ordered
                        sort = new Date("1-" + data.dimensions.time.label.replace("-", " "));
                        //build an array with the 3 values we need and convert the value to a number
                        let chartdata = [data.dimensions.time.label, parseFloat(data.observation), sort];
                        //add these arrays to the timeseries array
                        timeseries.push(chartdata);
                    });

                    //sort the array on the 'sort' field created earlier
                    timeseries = timeseries.sort(orderByDate);

                    //create the chart
                    Highcharts.chart('chart', {
                        series: [{
                            //add the data to the chart
                            data: timeseries
                        }],
                        navigation: {
                            buttonOptions: {
                                enabled: false
                            }
                        },
                        title: {
                            text: null
                        },
                        yAxis: {
                            labels: {
                                enabled: false
                            },
                            title: {
                                enabled: false
                            },
                            // min: 0
                        },
                        legend: {
                            enabled: false
                        },
                        xAxis: {
                            type: "category",
                            crosshair: true
                        }
                    });
                })
                .catch((e) => {
                    console.log(e);
                });
        });

    };
</script>

<div>
    <h3>Example</h3>
    <p>
        Make a <tt>GET</tt> request to <tt>https://api.beta.ons.gov.uk/v1/datasets/cpih01/editions/time-series/versions/6/observations?time=*&geography=K02000001&aggregate=cpih1dim1A0</tt>
    </p>
    <div>
        <button class="btn btn--primary" id="tryitout-get-observation">Try it out</button>
    </div>

    <div class="hidden" style="margin-top: 20px;" id="tryitout-get-observation-results">
        <fieldset class="btn-group">
            <div role="radiogroup">
                <label class="btn btn--secondary btn--chart-control btn--secondary-active" id="tab-results">
                    Results <input name="range" aria-controls="data" checked="" type="radio">
                </label>
                <label class="btn btn--secondary btn--chart-control" id="tab-json">
                    JSON <input name="range" aria-controls="data" type="radio">
                </label>
            </div>
        </fieldset>
        <div id="tryitout-get-observation-json-result" class="hidden"><pre style="max-height: 300px; overflow-y: scroll;" id="tryitout-get-observation-json"></pre></div>
        <div id="tryitout-get-observation-result-result">
            <script src="https://code.highcharts.com/highcharts.js"></script>
            <div id='title'></div>
            <div id='chart' style='max-width:600px'></div>
        </div>
    </div>
</div>

<nav style="margin-top: 20px">
    <a class="btn btn--primary" href="../single-data-point/"><span class="icon icon-arrow-left--light-small"></span> Get a single data point</a>
    <a class="btn btn--primary float-right" href="../finished/">Finished <span class="icon icon-arrow-right--light-small"></span></a>
</nav>
</div>
                </div>
            </div>
        </div>
    </main>
    <footer>
        <div class="wrapper">
            <div class="improve-this-page" data-module="improve-this-page">
                <div class="improve-this-page__prompt clearfix" id="feedback-form-header" tabindex="-1">
                <h3 class="improve-this-page__is-useful-question">Is this page useful?</h3>
                <a id="feedback-form-yes" class="improve-this-page__page-is-useful-button" href="https://beta.ons.gov.uk/feedback/thanks">
                Yes
                </a>
                <a id="feedback-form-no" class="js-toggle" href="https://beta.ons.gov.uk/feedback?service=dev">
                No
                </a>
                <a id="feedback-form-anything-wrong" class="js-toggle improve-this-page__anything-wrong" href="https://beta.ons.gov.uk/feedback?service=dev">
                Can't find what you're looking for?
                </a>
                </div>
                <div id="feedback-form" class="improve-this-page__form js-hidden">
                    <a href="#" id="feedback-form-close" class="improve-this-page__close js-toggle">Close</a>
                    <form id="feedback-form-container">
                        <input name="feedback-form-type" value="footer" type="hidden">
                        <input name="url" id="feedback-form-url" value="https://developer.beta.ons.gov.uk" type="hidden">
                        <div class="form-group">
                            <label class="form-label-bold" id="description-field-label" for="description-field">
                            How should we improve this page?
                            </label>
                            <textarea id="description-field" class="form-control" name="description" rows="5"></textarea>
                        </div>
                        <div class="form-group">
                            <label class="form-label-bold" for="name-field">
                            Name (optional)
                                <span class="form-hint">Include your name and email address if you'd like us to get back to you.</span>
                            </label>
                            <input id="name-field" class="form-control" name="name" type="text">
                        </div>
                        <div class="form-group">
                            <label class="form-label-bold" id="email-field-label" for="email-field">Email (optional)</label>
                            <input id="email-field" class="form-control" name="email" type="text">
                        </div>
                        <div>
                            <input id="feedback-form-submit" class="btn btn--primary font-weight-700" value="Send feedback" type="submit">
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <h2 class="visuallyhidden">Footer links</h2>
        <div class="footer">
            <div class="wrapper">
                <nav>
                    <div class="footer-nav col-wrap">
                        <div class="col col--lg-one-third col--md-one-third">
                            <h3 class="footer-nav__heading">Help</h3>
                            <ul class="footer-nav__list">
                                <li class="footer-nav__item">
                                    <a href="/help/accessibility">Accessibility</a>
                                </li>
                                <li class="footer-nav__item">
                                    <a href="/help/cookiesandprivacy">Cookies and privacy</a>
                                </li>
                                <li class="footer-nav__item">
                                    <a href="/help/termsandconditions">Terms and conditions</a>
                                </li>
                            </ul>
                        </div>
                        <div class="col col--lg-one-third col--md-one-third">
                            <h3 class="footer-nav__heading">About ONS</h3>
                            <ul class="footer-nav__list">
                                <li class="footer-nav__item">
                                    <a href="/aboutus/whatwedo">What we do</a>
                                </li>
                                <li class="footer-nav__item">
                                    <a href="/aboutus/careers">Careers</a>
                                </li>
                                <li class="footer-nav__item">
                                    <a href="/aboutus/contactus">Contact us</a>
                                </li>
                                <li class="footer-nav__item">
                                    <a href="/news">News</a>
                                </li>
                                <li class="footer-nav__item">
                                    <a href="/aboutus/transparencyandgovernance/freedomofinformationfoi">Freedom of Information</a>
                                </li>
                            </ul>
                        </div>
                        <div class="col col--lg-one-third col--md-one-third">
                            <h3 class="footer-nav__heading">Connect with us</h3>
                            <ul class="footer-nav__list">
                                <li class="footer-nav__item">
                                    <a href="https://twitter.com/ONS" class="icon--hide">Twitter</a>
                                </li>
                                <li class="footer-nav__item">
                                    <a href="https://www.facebook.com/ONS" class="icon--hide">Facebook</a>
                                </li>
                                <li class="footer-nav__item">
                                    <a href="https://www.linkedin.com/company/office-for-national-statistics" class="icon--hide">LinkedIn</a>
                                </li>
                                <li class="footer-nav__item">
                                    <a href="https://public.govdelivery.com/accounts/UKONS/subscribers/new" class="icon--hide">Email alerts</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </nav>
            </div>
            <div class="wrapper">
                <div class="footer-license">
                    <img class="footer-license__img" alt="OGL" width="60" src="https://www.ons.gov.uk/img/ogl.png">
                    <p class="footer-license__text margin-left-sm--0">
                        All content is available under the <a class="icon--hide" href="http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/">Open Government Licence v3.0</a> <span class="icon icon-external--light-small"></span>, except where otherwise stated
                    </p>
            </div>
        </div>
    </div>
    </footer>
    <script>window.feedbackOrigin = "https://beta.ons.gov.uk"</script>
    <script src="https://cdn.ons.gov.uk/sixteens/eb938ca/js/main.js"></script>
</body>
</html>